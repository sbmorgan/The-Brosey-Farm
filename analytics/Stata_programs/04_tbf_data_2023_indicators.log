--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  clean_01
       log:  C:\Users\sethb\Documents\The Brosey Farm\GitHub repositories\The-Brosey-Farm\analytics\Stata_programs\04_tbf_data_2023_indicators.log
  log type:  text
 opened on:  27 Sep 2023, 23:41:09

. 
. 
. *************************************************************************************************
. ***                                                                                           ***
. *** Program name: 04_tbf_data_2023_indicators.do                                              ***
. *** Project: TBF Market Garden 2023                                                                       ***
. *** Purpose: Create Analysis Indicators for TBF Market Garden 2023 data                       ***    
. ***                                                                                                                                                                           
>     ***
. *** Contents:                                                                                             ***
. ***    0) SET UP CODE                                                                                         ***
. ***    I) LOAD DATA                                                                           ***
. ***    II) CREATE ANALYSIS INDICATORS                                                         ***
. ***    III)                                                                                   ***
. ***                                                                                           ***
. *** Authors: Seth B. Morgan                                                                               ***
. *** Start date: September 26, 2023                                                                                            ***
. *** Last date modified: September 27, 2023                                                    ***
. ***                                                                                           ***
. *** Notes:                                                                                    ***
. ***                                                                                           ***
. ***                                                                                           ***
. *************************************************************************************************
. 
. clear all

. version 18.0

. set more off

. set varabbrev off

. pause off

. 
. 
. *=========================================================================================
. * 0) SET UP CODE
. *=========================================================================================      
. 
. /* Set seed */
.         set seed 7122023

.         
. /* Define globals */
. 
.         *Root
.         global root "C:\Users\sethb\Documents\The Brosey Farm\GitHub repositories\The-Brosey-Farm\analytics"

.     adopath ++ "$root"
  [1]              "C:\Users\sethb\Documents\The Brosey Farm\GitHub repositories\The-Brosey-Farm\analytics"
  [2]  (BASE)      "C:\Program Files\Stata18\ado\base/"
  [3]  (SITE)      "C:\Program Files\Stata18\ado\site/"
  [4]              "."
  [5]  (PERSONAL)  "C:\Users\sethb\ado\personal/"
  [6]  (PLUS)      "C:\Users\sethb\ado\plus/"
  [7]  (OLDPLACE)  "c:\ado/"

.     
. 
. *=========================================================================================
. * I) LOAD DATA
. *=========================================================================================
.         
.         /* Load clean TBF Market Garden 2023 data */
.         use "$root\modified_data\tbf_market_garden_data_2023_clean.dta", clear

.         
.         
. *=========================================================================================
. * II) CREATE ANALYSIS INDICATORS
. *=========================================================================================
.         
.         /* */
.         generate c_harvest_no_plant=.c
(32 missing values generated)

.         label variable c_harvest_no_plant "number of plants harvested"

.         replace c_harvest_no_plant=transp_no_end_1 if sow_type=="indoor seed" & transp_no_end_2==.s
(1 real change made)

.         replace c_harvest_no_plant=transp_no_end_2 if sow_type=="indoor seed" & transp_no_end_2!=.s
(11 real changes made, 2 to missing)

.         replace c_harvest_no_plant= (sow_no_thin_per * sow_no_cellrowhill) if sow_type=="outdoor seed"
(17 real changes made)

.         replace c_harvest_no_plant=transp_no_end_1 if sow_type=="external transplant"
(3 real changes made)

.         tablist sow_type crop transp_no_end_1 transp_no_end_2 sow_no_thin_per sow_no_cellrowhill c_harvest_no_plant, sort(v) ab(32)

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  | external transplant |                  pepper- ghost  |               1 |              .s |              .s |                 .s |                  1 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                            1                                       |                                         3.12                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  | external transplant |                pepper- habanero |               1 |              .s |              .s |                 .s |                  1 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                            2                                       |                                         6.25                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  | external transplant |            pepper- sweet banana |               6 |              .s |              .s |                 .s |                  6 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                            3                                       |                                         9.38                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |         indoor seed |                    basil- sweet |               6 |               6 |              .m |                  4 |                  6 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                            4                                       |                                        12.50                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |         indoor seed |          eggplant- black beauty |               9 |               9 |              .m |                  4 |                  9 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                            5                                       |                                        15.62                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |         indoor seed |                  kale- lacinato |               6 |               6 |              .m |                  4 |                  6 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                            6                                       |                                        18.75                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |         indoor seed |                  kale- lacinato |              .f |              .f |               1 |                  8 |                 .f |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                            7                                       |                                        21.88                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |         indoor seed |          lettuce- gourmet blend |              32 |              .s |              .m |                 20 |                 32 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                            8                                       |                                        25.00                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |         indoor seed |          lettuce- gourmet blend |              .f |              .f |               1 |                 24 |                 .f |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                            9                                       |                                        28.12                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |         indoor seed |                 pepper- anaheim |               8 |               8 |              .m |                  4 |                  8 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           10                                       |                                        31.25                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |         indoor seed |         pepper- jalapeno- early |              10 |              10 |              .m |                  4 |                 10 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           11                                       |                                        34.38                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |         indoor seed |        pepper- sweet- ca wonder |              18 |              18 |              .m |                  8 |                 18 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           12                                       |                                        37.50                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |         indoor seed |                sage- broad leaf |               0 |               3 |              .m |                  4 |                  3 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           13                                       |                                        40.62                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |         indoor seed |                   tomato- amish |              12 |              12 |              .m |                  4 |                 12 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           14                                       |                                        43.75                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |         indoor seed |                    tomato- roma |              18 |              18 |              .m |                  8 |                 18 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           15                                       |                                        46.88                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |        outdoor seed |          arrugula- garden tangy |              .s |              .s |              20 |                  1 |                 20 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           16                                       |                                        50.00                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |        outdoor seed |          arrugula- garden tangy |              .s |              .s |              35 |                  1 |                 35 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           17                                       |                                        53.12                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |        outdoor seed |             bean- fin de bagnol |              .s |              .s |               9 |                  1 |                  9 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           18                                       |                                        56.25                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |        outdoor seed |             bean- fin de bagnol |              .s |              .s |              18 |                  1 |                 18 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           19                                       |                                        59.38                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |        outdoor seed |                 carrot- touchon |              .s |              .s |              18 |                  3 |                 54 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           20                                       |                                        62.50                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |        outdoor seed |                 carrot- touchon |              .s |              .s |              20 |                  3 |                 60 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           21                                       |                                        65.62                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |        outdoor seed |                        cilantro |              .s |              .s |              27 |                  1 |                 27 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           22                                       |                                        68.75                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |        outdoor seed |                      dill- hera |              .s |              .s |              10 |                  1 |                 10 |      2 |   6.25 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           24                                       |                                        75.00                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |        outdoor seed |               pumpkin- ct field |              .s |              .s |               3 |                  4 |                 12 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           25                                       |                                        78.12                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |        outdoor seed |               pumpkin- ct field |              .s |              .s |             3.5 |                  4 |                 14 |      1 |   3.12 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           26                                       |                                        81.25                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |        outdoor seed |              sunflower- mammoth |              .s |              .s |              35 |                  1 |                 35 |      2 |   6.25 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           28                                       |                                        87.50                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |        outdoor seed |   sweet corn- country gentleman |              .s |              .s |              35 |                  2 |                 70 |      2 |   6.25 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           30                                       |                                        93.75                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |            sow_type |                            crop | transp_no_end_1 | transp_no_end_2 | sow_no_thin_per | sow_no_cellrowhill | c_harvest_no_plant | _Freq_ | _Perc_ |
  |        outdoor seed | sweet corn- ornamental- glas gm |              .s |              .s |              35 |                  2 |                 70 |      2 |   6.25 |
  |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                                      _CFreq_                                       |                                      _CPerc_                                       |
  |                                           32                                       |                                       100.00                                       |
  +-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.         table crop, statistic(total c_harvest_no_plant)

------------------------------------------
                                  |  Total
----------------------------------+-------
crop type                         |       
  arrugula- garden tangy          |     55
  basil- sweet                    |      6
  bean- fin de bagnol             |     27
  carrot- touchon                 |    114
  cilantro                        |     27
  dill- hera                      |     20
  eggplant- black beauty          |      9
  kale- lacinato                  |      6
  lettuce- gourmet blend          |     32
  pepper- anaheim                 |      8
  pepper- ghost                   |      1
  pepper- habanero                |      1
  pepper- jalapeno- early         |     10
  pepper- sweet banana            |      6
  pepper- sweet- ca wonder        |     18
  pumpkin- ct field               |     26
  sage- broad leaf                |      3
  sunflower- mammoth              |     70
  sweet corn- country gentleman   |    140
  sweet corn- ornamental- glas gm |    140
  tomato- amish                   |     12
  tomato- roma                    |     18
  Total                           |    749
------------------------------------------

.         
.         /* Harvest */
.         
.         *-> Total harvest- weight
.         tablist crop crop_code harvest_unit_1, sort(v) ab(32) nolabel

  +----------------------------------------------------------------------------------------------------+
  |                            crop   crop_code   harvest_unit_1   _Freq_   _Perc_   _CFreq_   _CPerc_ |
  |----------------------------------------------------------------------------------------------------|
  |          arrugula- garden tangy           1               .s        2     6.25         2      6.25 |
  |                    basil- sweet           2               .s        1     3.12         3      9.38 |
  |             bean- fin de bagnol           3            pound        2     6.25         5     15.62 |
  |                 carrot- touchon           4           ounces        1     3.12         6     18.75 |
  |                 carrot- touchon           4            pound        1     3.12         7     21.88 |
  |----------------------------------------------------------------------------------------------------|
  |                        cilantro           5               .s        1     3.12         8     25.00 |
  |                      dill- hera           6               .s        2     6.25        10     31.25 |
  |          eggplant- black beauty           7            pound        1     3.12        11     34.38 |
  |                  kale- lacinato           8               .s        2     6.25        13     40.62 |
  |          lettuce- gourmet blend           9               .s        2     6.25        15     46.88 |
  |----------------------------------------------------------------------------------------------------|
  |                 pepper- anaheim          10            pound        1     3.12        16     50.00 |
  |                  pepper- ghost           11            ounce        1     3.12        17     53.12 |
  |                pepper- habanero          12            ounce        1     3.12        18     56.25 |
  |         pepper- jalapeno- early          13            pound        1     3.12        19     59.38 |
  |            pepper- sweet banana          14            pound        1     3.12        20     62.50 |
  |----------------------------------------------------------------------------------------------------|
  |        pepper- sweet- ca wonder          15            pound        1     3.12        21     65.62 |
  |               pumpkin- ct field          16           medium        1     3.12        22     68.75 |
  |               pumpkin- ct field          16            small        1     3.12        23     71.88 |
  |                sage- broad leaf          17               .s        1     3.12        24     75.00 |
  |              sunflower- mammoth          18               .s        2     6.25        26     81.25 |
  |----------------------------------------------------------------------------------------------------|
  |   sweet corn- country gentleman          19             unit        2     6.25        28     87.50 |
  | sweet corn- ornamental- glas gm          20               .s        2     6.25        30     93.75 |
  |                   tomato- amish          21            pound        1     3.12        31     96.88 |
  |                    tomato- roma          22            ounce        1     3.12        32    100.00 |
  +----------------------------------------------------------------------------------------------------+

.         generate flag_crop_nowt= inlist(crop_code,1,2,5,6,8,9) | inlist(crop_code,16,17,18,19,20) 

.         tablist crop crop_code flag_crop_nowt harvest_unit_1, sort(v) ab(32) nolabel

  +---------------------------------------------------------------------------------------------------------------------+
  |                            crop   crop_code   flag_crop_nowt   harvest_unit_1   _Freq_   _Perc_   _CFreq_   _CPerc_ |
  |---------------------------------------------------------------------------------------------------------------------|
  |          arrugula- garden tangy           1                1               .s        2     6.25         2      6.25 |
  |                    basil- sweet           2                1               .s        1     3.12         3      9.38 |
  |             bean- fin de bagnol           3                0            pound        2     6.25         5     15.62 |
  |                 carrot- touchon           4                0           ounces        1     3.12         6     18.75 |
  |                 carrot- touchon           4                0            pound        1     3.12         7     21.88 |
  |---------------------------------------------------------------------------------------------------------------------|
  |                        cilantro           5                1               .s        1     3.12         8     25.00 |
  |                      dill- hera           6                1               .s        2     6.25        10     31.25 |
  |          eggplant- black beauty           7                0            pound        1     3.12        11     34.38 |
  |                  kale- lacinato           8                1               .s        2     6.25        13     40.62 |
  |          lettuce- gourmet blend           9                1               .s        2     6.25        15     46.88 |
  |---------------------------------------------------------------------------------------------------------------------|
  |                 pepper- anaheim          10                0            pound        1     3.12        16     50.00 |
  |                  pepper- ghost           11                0            ounce        1     3.12        17     53.12 |
  |                pepper- habanero          12                0            ounce        1     3.12        18     56.25 |
  |         pepper- jalapeno- early          13                0            pound        1     3.12        19     59.38 |
  |            pepper- sweet banana          14                0            pound        1     3.12        20     62.50 |
  |---------------------------------------------------------------------------------------------------------------------|
  |        pepper- sweet- ca wonder          15                0            pound        1     3.12        21     65.62 |
  |               pumpkin- ct field          16                1           medium        1     3.12        22     68.75 |
  |               pumpkin- ct field          16                1            small        1     3.12        23     71.88 |
  |                sage- broad leaf          17                1               .s        1     3.12        24     75.00 |
  |              sunflower- mammoth          18                1               .s        2     6.25        26     81.25 |
  |---------------------------------------------------------------------------------------------------------------------|
  |   sweet corn- country gentleman          19                1             unit        2     6.25        28     87.50 |
  | sweet corn- ornamental- glas gm          20                1               .s        2     6.25        30     93.75 |
  |                   tomato- amish          21                0            pound        1     3.12        31     96.88 |
  |                    tomato- roma          22                0            ounce        1     3.12        32    100.00 |
  +---------------------------------------------------------------------------------------------------------------------+

.         label variable flag_crop_nowt "flags crops not harvested by weight"

.         
.         generate c_harvest_total_wtoz= 0

.         replace c_harvest_total_wtoz= .c if flag_crop_nowt==1 
(19 real changes made, 19 to missing)

.         label variable c_harvest_total_wtoz "total harvest- weight, ounces"

.         
.         forval x=1/25 {
  2.                 capture confirm string variable harvest_unit_`x'
  3.                 if _rc==0 {
  4.                         replace c_harvest_total_wtoz= c_harvest_total_wtoz + harvest_amnt_`x' if harvest_unit_`x'=="ounce" & flag_crop_nowt==0
  5.                         replace c_harvest_total_wtoz= c_harvest_total_wtoz + (harvest_amnt_`x' * 16) if harvest_unit_`x'=="pound" & flag_crop_nowt==0
  6.                 }
  7.                 else assert harvest_unit_`x'==.s // No harvest collected.
  8.         } 
(3 real changes made)
(9 real changes made)
(6 real changes made)
(5 real changes made)
(6 real changes made)
(5 real changes made)
(7 real changes made)
(4 real changes made)
(6 real changes made)
(4 real changes made)
(7 real changes made)
(3 real changes made)
(5 real changes made)
(5 real changes made)
(2 real changes made)
(7 real changes made)
(3 real changes made)
(4 real changes made)
(5 real changes made)
(2 real changes made)
(4 real changes made)
(3 real changes made)
(5 real changes made)
(1 real change made)
(3 real changes made)
(2 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(0 real changes made)
(1 real change made)
(0 real changes made)
(1 real change made)
(0 real changes made)
(1 real change made)
(0 real changes made)
(1 real change made)
(0 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(1 real change made)
(0 real changes made)

.         assert c_harvest_total_wtoz==.c if flag_crop_nowt==1 

.         table crop if flag_crop_nowt==0, statistic(total c_harvest_total_wtoz)

-----------------------------------
                           |  Total
---------------------------+-------
crop type                  |       
  bean- fin de bagnol      |  157.5
  carrot- touchon          |    160
  eggplant- black beauty   |    774
  pepper- anaheim          |  376.5
  pepper- ghost            |     19
  pepper- habanero         |     23
  pepper- jalapeno- early  |    350
  pepper- sweet banana     |    253
  pepper- sweet- ca wonder |    615
  tomato- amish            |  2,781
  tomato- roma             |  3,398
  Total                    |  8,907
-----------------------------------

.         
.         clonevar c_harvest_total_wtlb= c_harvest_total_wtoz
(19 missing values generated)

.         label variable c_harvest_total_wtlb "total harvest- weight, pounds"

.         replace c_harvest_total_wtlb= c_harvest_total_wtlb/16 if flag_crop_nowt==0
(13 real changes made)

.         assert c_harvest_total_wtlb==.c if flag_crop_nowt==1 

.         table crop if flag_crop_nowt==0, statistic(total c_harvest_total_wtlb)  

-------------------------------------
                           |    Total
---------------------------+---------
crop type                  |         
  bean- fin de bagnol      |  9.84375
  carrot- touchon          |       10
  eggplant- black beauty   |   48.375
  pepper- anaheim          |  23.5313
  pepper- ghost            |   1.1875
  pepper- habanero         |   1.4375
  pepper- jalapeno- early  |   21.875
  pepper- sweet banana     |  15.8125
  pepper- sweet- ca wonder |  38.4375
  tomato- amish            |  173.813
  tomato- roma             |  212.375
  Total                    |  556.688
-------------------------------------

. 
.         *-> Total harvest- unit
.         tablist crop crop_code harvest_unit_1, sort(v) ab(32) nolabel

  +----------------------------------------------------------------------------------------------------+
  |                            crop   crop_code   harvest_unit_1   _Freq_   _Perc_   _CFreq_   _CPerc_ |
  |----------------------------------------------------------------------------------------------------|
  |          arrugula- garden tangy           1               .s        2     6.25         2      6.25 |
  |                    basil- sweet           2               .s        1     3.12         3      9.38 |
  |             bean- fin de bagnol           3            pound        2     6.25         5     15.62 |
  |                 carrot- touchon           4           ounces        1     3.12         6     18.75 |
  |                 carrot- touchon           4            pound        1     3.12         7     21.88 |
  |----------------------------------------------------------------------------------------------------|
  |                        cilantro           5               .s        1     3.12         8     25.00 |
  |                      dill- hera           6               .s        2     6.25        10     31.25 |
  |          eggplant- black beauty           7            pound        1     3.12        11     34.38 |
  |                  kale- lacinato           8               .s        2     6.25        13     40.62 |
  |          lettuce- gourmet blend           9               .s        2     6.25        15     46.88 |
  |----------------------------------------------------------------------------------------------------|
  |                 pepper- anaheim          10            pound        1     3.12        16     50.00 |
  |                  pepper- ghost           11            ounce        1     3.12        17     53.12 |
  |                pepper- habanero          12            ounce        1     3.12        18     56.25 |
  |         pepper- jalapeno- early          13            pound        1     3.12        19     59.38 |
  |            pepper- sweet banana          14            pound        1     3.12        20     62.50 |
  |----------------------------------------------------------------------------------------------------|
  |        pepper- sweet- ca wonder          15            pound        1     3.12        21     65.62 |
  |               pumpkin- ct field          16           medium        1     3.12        22     68.75 |
  |               pumpkin- ct field          16            small        1     3.12        23     71.88 |
  |                sage- broad leaf          17               .s        1     3.12        24     75.00 |
  |              sunflower- mammoth          18               .s        2     6.25        26     81.25 |
  |----------------------------------------------------------------------------------------------------|
  |   sweet corn- country gentleman          19             unit        2     6.25        28     87.50 |
  | sweet corn- ornamental- glas gm          20               .s        2     6.25        30     93.75 |
  |                   tomato- amish          21            pound        1     3.12        31     96.88 |
  |                    tomato- roma          22            ounce        1     3.12        32    100.00 |
  +----------------------------------------------------------------------------------------------------+

.         generate flag_crop_nout= !inlist(crop_code,16,19,20)

.         tablist crop crop_code flag_crop_nout harvest_unit_1, sort(v) ab(32) nolabel

  +---------------------------------------------------------------------------------------------------------------------+
  |                            crop   crop_code   flag_crop_nout   harvest_unit_1   _Freq_   _Perc_   _CFreq_   _CPerc_ |
  |---------------------------------------------------------------------------------------------------------------------|
  |          arrugula- garden tangy           1                1               .s        2     6.25         2      6.25 |
  |                    basil- sweet           2                1               .s        1     3.12         3      9.38 |
  |             bean- fin de bagnol           3                1            pound        2     6.25         5     15.62 |
  |                 carrot- touchon           4                1           ounces        1     3.12         6     18.75 |
  |                 carrot- touchon           4                1            pound        1     3.12         7     21.88 |
  |---------------------------------------------------------------------------------------------------------------------|
  |                        cilantro           5                1               .s        1     3.12         8     25.00 |
  |                      dill- hera           6                1               .s        2     6.25        10     31.25 |
  |          eggplant- black beauty           7                1            pound        1     3.12        11     34.38 |
  |                  kale- lacinato           8                1               .s        2     6.25        13     40.62 |
  |          lettuce- gourmet blend           9                1               .s        2     6.25        15     46.88 |
  |---------------------------------------------------------------------------------------------------------------------|
  |                 pepper- anaheim          10                1            pound        1     3.12        16     50.00 |
  |                  pepper- ghost           11                1            ounce        1     3.12        17     53.12 |
  |                pepper- habanero          12                1            ounce        1     3.12        18     56.25 |
  |         pepper- jalapeno- early          13                1            pound        1     3.12        19     59.38 |
  |            pepper- sweet banana          14                1            pound        1     3.12        20     62.50 |
  |---------------------------------------------------------------------------------------------------------------------|
  |        pepper- sweet- ca wonder          15                1            pound        1     3.12        21     65.62 |
  |               pumpkin- ct field          16                0           medium        1     3.12        22     68.75 |
  |               pumpkin- ct field          16                0            small        1     3.12        23     71.88 |
  |                sage- broad leaf          17                1               .s        1     3.12        24     75.00 |
  |              sunflower- mammoth          18                1               .s        2     6.25        26     81.25 |
  |---------------------------------------------------------------------------------------------------------------------|
  |   sweet corn- country gentleman          19                0             unit        2     6.25        28     87.50 |
  | sweet corn- ornamental- glas gm          20                0               .s        2     6.25        30     93.75 |
  |                   tomato- amish          21                1            pound        1     3.12        31     96.88 |
  |                    tomato- roma          22                1            ounce        1     3.12        32    100.00 |
  +---------------------------------------------------------------------------------------------------------------------+

.         label variable flag_crop_nout "flags crops not harvested by unit"

.         
.         generate c_harvest_total_unit= 0

.         replace c_harvest_total_unit= .c if flag_crop_nout==1 
(26 real changes made, 26 to missing)

.         label variable c_harvest_total_unit "total harvest- units"

.         
.         forval x=1/25 {
  2.                 capture confirm string variable harvest_unit_`x'
  3.                 if _rc==0 {
  4.                         replace c_harvest_total_unit= c_harvest_total_unit + harvest_amnt_`x' if inlist(harvest_unit_`x',"unit","small","medium","large") & flag_crop_nout=
> =0
  5.                 } 
  6.                 else assert harvest_unit_`x'==.s // No harvest collected.
  7.         }
(4 real changes made)
(3 real changes made)
(2 real changes made)
(1 real change made)
(1 real change made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)

.         assert c_harvest_total_unit==.c if flag_crop_nout==1 

.         table crop if flag_crop_nout==0, statistic(total c_harvest_total_unit)

------------------------------------------
                                  |  Total
----------------------------------+-------
crop type                         |       
  pumpkin- ct field               |     22
  sweet corn- country gentleman   |     40
  sweet corn- ornamental- glas gm |      0
  Total                           |     62
------------------------------------------

. 
.         /* Save TBF Market Garden 2023 data with analysis indicators */
.         drop flag_*

.         quietly compress

.         save "$root\modified_data\tbf_market_garden_data_2023_clean_indicators.dta", replace
file C:\Users\sethb\Documents\The Brosey Farm\GitHub repositories\The-Brosey-Farm\analytics\modified_data\tbf_market_garden_data_2023_clean_indicators.dta saved

.         
.         /* */
.         des c_*

Variable      Storage   Display    Value
    name         type    format    label      Variable label
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
c_harvest_no_~t byte    %9.0g                 number of plants harvested
c_harvest_tot~z float   %9.0g                 total harvest- weight, ounces
c_harvest_tot~b float   %9.0g                 total harvest- weight, pounds
c_harvest_tot~t byte    %9.0g                 total harvest- units

.         summarize c_*, detail

                 number of plants harvested
-------------------------------------------------------------
      Percentiles      Smallest
 1%            1              1
 5%            1              1
10%          4.5              3       Obs                  30
25%            9              6       Sum of wgt.          30

50%           16                      Mean           24.96667
                        Largest       Std. dev.      23.00297
75%           35             70
90%           70             70       Variance       529.1368
95%           70             70       Skewness       1.001788
99%           70             70       Kurtosis       2.602125

                total harvest- weight, ounces
-------------------------------------------------------------
      Percentiles      Smallest
 1%           19             19
 5%           19             23
10%           23           40.5       Obs                  13
25%           60             60       Sum of wgt.          13

50%          253                      Mean           685.1538
                        Largest       Std. dev.      1099.738
75%          615            615
90%         2781            774       Variance        1209423
95%         3398           2781       Skewness       1.796096
99%         3398           3398       Kurtosis       4.595043

                total harvest- weight, pounds
-------------------------------------------------------------
      Percentiles      Smallest
 1%       1.1875         1.1875
 5%       1.1875         1.4375
10%       1.4375        2.53125       Obs                  13
25%         3.75           3.75       Sum of wgt.          13

50%      15.8125                      Mean           42.82212
                        Largest       Std. dev.      68.73362
75%      38.4375        38.4375
90%     173.8125         48.375       Variance        4724.31
95%      212.375       173.8125       Skewness       1.796096
99%      212.375        212.375       Kurtosis       4.595043

                    total harvest- units
-------------------------------------------------------------
      Percentiles      Smallest
 1%            0              0
 5%            0              0
10%            0             10       Obs                   6
25%            0             12       Sum of wgt.           6

50%           11                      Mean           10.33333
                        Largest       Std. dev.      8.981462
75%           20             10
90%           20             12       Variance       80.66667
95%           20             20       Skewness      -.1196154
99%           20             20       Kurtosis       1.485431

.         
.    
. *=========================================================================================
. * III) 
. *=========================================================================================  
. 
.         collapse (sum) c_harvest_no_plant c_harvest_total_wtoz c_harvest_total_wtlb c_harvest_total_unit, by(crop)

.         tablist crop c_harvest_no_plant c_harvest_total_wtoz c_harvest_total_wtlb c_harvest_total_unit, sort(v) ab(32)

  +-----------------------------------------------------------------------------------------------------------------------------------------------------------------+
  |                            crop   c_harvest_no_plant   c_harvest_total_wtoz   c_harvest_total_wtlb   c_harvest_total_unit   _Freq_   _Perc_   _CFreq_   _CPerc_ |
  |-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |          arrugula- garden tangy                   55                      0                      0                      0        1     4.55         1      4.55 |
  |                    basil- sweet                    6                      0                      0                      0        1     4.55         2      9.09 |
  |             bean- fin de bagnol                   27                  157.5                9.84375                      0        1     4.55         3     13.64 |
  |                 carrot- touchon                  114                    160                     10                      0        1     4.55         4     18.18 |
  |                        cilantro                   27                      0                      0                      0        1     4.55         5     22.73 |
  |-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                      dill- hera                   20                      0                      0                      0        1     4.55         6     27.27 |
  |          eggplant- black beauty                    9                    774                 48.375                      0        1     4.55         7     31.82 |
  |                  kale- lacinato                    6                      0                      0                      0        1     4.55         8     36.36 |
  |          lettuce- gourmet blend                   32                      0                      0                      0        1     4.55         9     40.91 |
  |                 pepper- anaheim                    8                  376.5               23.53125                      0        1     4.55        10     45.45 |
  |-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                  pepper- ghost                     1                     19                 1.1875                      0        1     4.55        11     50.00 |
  |                pepper- habanero                    1                     23                 1.4375                      0        1     4.55        12     54.55 |
  |         pepper- jalapeno- early                   10                    350                 21.875                      0        1     4.55        13     59.09 |
  |            pepper- sweet banana                    6                    253                15.8125                      0        1     4.55        14     63.64 |
  |        pepper- sweet- ca wonder                   18                    615                38.4375                      0        1     4.55        15     68.18 |
  |-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |               pumpkin- ct field                   26                      0                      0                     22        1     4.55        16     72.73 |
  |                sage- broad leaf                    3                      0                      0                      0        1     4.55        17     77.27 |
  |              sunflower- mammoth                   70                      0                      0                      0        1     4.55        18     81.82 |
  |   sweet corn- country gentleman                  140                      0                      0                     40        1     4.55        19     86.36 |
  | sweet corn- ornamental- glas gm                  140                      0                      0                      0        1     4.55        20     90.91 |
  |-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
  |                   tomato- amish                   12                   2781               173.8125                      0        1     4.55        21     95.45 |
  |                    tomato- roma                   18                   3398                212.375                      0        1     4.55        22    100.00 |
  +-----------------------------------------------------------------------------------------------------------------------------------------------------------------+

. 
.         generate c_harvest_wtlb_per_plant = c_harvest_total_wtlb / c_harvest_no_plant

.         tablist crop c_harvest_wtlb_per_plant c_harvest_total_wtlb c_harvest_no_plant, sort(v) ab(32)

  +----------------------------------------------------------------------------------------------------------------------------------------------+
  |                            crop   c_harvest_wtlb_per_plant   c_harvest_total_wtlb   c_harvest_no_plant   _Freq_   _Perc_   _CFreq_   _CPerc_ |
  |----------------------------------------------------------------------------------------------------------------------------------------------|
  |          arrugula- garden tangy                          0                      0                   55        1     4.55         1      4.55 |
  |                    basil- sweet                          0                      0                    6        1     4.55         2      9.09 |
  |             bean- fin de bagnol                   .3645833                9.84375                   27        1     4.55         3     13.64 |
  |                 carrot- touchon                   .0877193                     10                  114        1     4.55         4     18.18 |
  |                        cilantro                          0                      0                   27        1     4.55         5     22.73 |
  |----------------------------------------------------------------------------------------------------------------------------------------------|
  |                      dill- hera                          0                      0                   20        1     4.55         6     27.27 |
  |          eggplant- black beauty                      5.375                 48.375                    9        1     4.55         7     31.82 |
  |                  kale- lacinato                          0                      0                    6        1     4.55         8     36.36 |
  |          lettuce- gourmet blend                          0                      0                   32        1     4.55         9     40.91 |
  |                 pepper- anaheim                   2.941406               23.53125                    8        1     4.55        10     45.45 |
  |----------------------------------------------------------------------------------------------------------------------------------------------|
  |                  pepper- ghost                      1.1875                 1.1875                    1        1     4.55        11     50.00 |
  |                pepper- habanero                     1.4375                 1.4375                    1        1     4.55        12     54.55 |
  |         pepper- jalapeno- early                     2.1875                 21.875                   10        1     4.55        13     59.09 |
  |            pepper- sweet banana                   2.635417                15.8125                    6        1     4.55        14     63.64 |
  |        pepper- sweet- ca wonder                   2.135417                38.4375                   18        1     4.55        15     68.18 |
  |----------------------------------------------------------------------------------------------------------------------------------------------|
  |               pumpkin- ct field                          0                      0                   26        1     4.55        16     72.73 |
  |                sage- broad leaf                          0                      0                    3        1     4.55        17     77.27 |
  |              sunflower- mammoth                          0                      0                   70        1     4.55        18     81.82 |
  |   sweet corn- country gentleman                          0                      0                  140        1     4.55        19     86.36 |
  | sweet corn- ornamental- glas gm                          0                      0                  140        1     4.55        20     90.91 |
  |----------------------------------------------------------------------------------------------------------------------------------------------|
  |                   tomato- amish                   14.48438               173.8125                   12        1     4.55        21     95.45 |
  |                    tomato- roma                   11.79861                212.375                   18        1     4.55        22    100.00 |
  +----------------------------------------------------------------------------------------------------------------------------------------------+

.     
. 
. log close _all
      name:  clean_01
       log:  C:\Users\sethb\Documents\The Brosey Farm\GitHub repositories\The-Brosey-Farm\analytics\Stata_programs\04_tbf_data_2023_indicators.log
  log type:  text
 closed on:  27 Sep 2023, 23:41:10
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
