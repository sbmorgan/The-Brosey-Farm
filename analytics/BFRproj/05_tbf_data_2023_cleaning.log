---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  full
       log:  C:\Users\sethb\Documents\The Brosey Farm\GitHub repositories\The-Brosey-Farm\analytics\BFRproj\05_tbf_data_2023_cleaning.log
  log type:  text
 opened on:  12 Jul 2023, 23:07:39

. 
. 
. *************************************************************************************************
. ***                                                                                           ***
. *** Program name: 05_tbf_data_2023_cleaning.do                                                ***
. *** Project: TBF Market Garden 2023                                                                       ***
. *** Purpose: Clean TBF Market Garden 2023 data                                                ***    
. ***                                                                                                                                                                               ***
. *** Contents:                                                                                             ***
. ***    0) SET UP CODE                                                                                         ***
. ***    I) LOAD RAW DATA                                                                       ***
. ***    II) MANAGE VARIABLES                                                                   ***
. ***    III) CLEAN DATA                                                                        ***
. ***    IV) DESCRIPTIVE STATISTICS                                                             ***
. ***                                                                                           ***
. *** Authors: Seth B. Morgan                                                                               ***
. *** Start date: July 12, 2023                                                                                                     ***
. *** Last date modified: July 12, 2023                                                         ***
. ***                                                                                           ***
. *** Notes:                                                                                    ***
. ***                                                                                           ***
. ***                                                                                           ***
. *************************************************************************************************
. 
. clear all

. version 18.0

. set more off

. set varabbrev off

. pause off

. 
. 
. *=========================================================================================
. * 0) SET UP CODE
. *=========================================================================================      
. 
. /* Set seed */
.         set seed 7122023

.         
. /* Define globals */
. 
.         *Root
.         global root "C:\Users\sethb\Documents\The Brosey Farm\GitHub repositories\The-Brosey-Farm\analytics\BFRproj"

.     adopath ++ "$root"
  [1]              "C:\Users\sethb\Documents\The Brosey Farm\GitHub repositories\The-Brosey-Farm\analytics\BFRproj"
  [2]  (BASE)      "C:\Program Files\Stata18\ado\base/"
  [3]  (SITE)      "C:\Program Files\Stata18\ado\site/"
  [4]              "."
  [5]  (PERSONAL)  "C:\Users\sethb\ado\personal/"
  [6]  (PLUS)      "C:\Users\sethb\ado\plus/"
  [7]  (OLDPLACE)  "c:\ado/"

.     
. 
. *=========================================================================================
. * I) LOAD RAW DATA 
. *=========================================================================================
. 
.         /* Load raw data */
.         import excel "$root\Brosey Farming.xlsx", sheet("data_2023") firstrow clear
(77 vars, 27 obs)

.         keep crop-notes

.         ds 
crop          sow_no_see~r  sow_light_~s  sow_fert_t~2  sow_fert_t~4  transp_n~t_1  fert_code_1   fert_amnt_~2  path_code_1   path_~te_1_2  path_~pe_2_1  notes
sow_type      sow_no_ger~r  sow_light_~e  sow_fer~se_2  sow_fer~se_4  transp_n~d_1  fert_date_1   fert_unit_2   path_date_1   path_~pe_1_3  path_~te_2_1
sow_date      sow_to_ger~s  sow_fer~te_1  sow_fer~te_3  transp_har~t  transp_dat~2  fert_amnt_~1  fert_code_3   path_no_1     path_~te_1_3  path_~pe_2_2
sow_type_med  sow_no_thi~r  sow_fert_t~1  sow_fert_t~3  transp_har~d  transp_med_2  fert_unit_1   fert_date_3   path_~pe_1_1  path_code_2   path_~te_2_2
sow_type_c~l  sow_heatmat   sow_fer~se_1  sow_fer~se_3  transp_dat~1  transp_n~t_2  fert_code_2   fert_amnt_~3  path_~te_1_1  path_date_2   path_~pe_2_3
sow_no_cel~l  sow_heatma~p  sow_fer~te_2  sow_fer~te_4  transp_med_1  transp_n~d_2  fert_date_2   fert_unit_3   path_~pe_1_2  path_no_2     path_~te_2_3

.         describe

Contains data
 Observations:            27                  
    Variables:            67                  
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Variable      Storage   Display    Value
    name         type    format    label      Variable label
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
crop            str31   %31s                  crop
sow_type        str12   %12s                  sow_type
sow_date        str10   %10s                  sow_date
sow_type_med    str18   %18s                  sow_type_med
sow_type_cell   byte    %10.0g                sow_type_cell
sow_no_cellro~l byte    %10.0g                sow_no_cellrowhill
sow_no_seed_per byte    %10.0g                sow_no_seed_per
sow_no_germ_per double  %10.0g                sow_no_germ_per
sow_to_germ_d~s byte    %10.0g                sow_to_germ_days
sow_no_thin_per double  %10.0g                sow_no_thin_per
sow_heatmat     str3    %9s                   sow_heatmat
sow_heatmat_t~p byte    %10.0g                sow_heatmat_temp
sow_light_hrs   byte    %10.0g                sow_light_hrs
sow_light_type  str7    %9s                   sow_light_type
sow_fert_date_1 str10   %10s                  sow_fert_date_1
sow_fert_type_1 str5    %9s                   sow_fert_type_1
sow_fert_dose_1 str4    %9s                   sow_fert_dose_1
sow_fert_date_2 str10   %10s                  sow_fert_date_2
sow_fert_type_2 str5    %9s                   sow_fert_type_2
sow_fert_dose_2 str4    %9s                   sow_fert_dose_2
sow_fert_date_3 str10   %10s                  sow_fert_date_3
sow_fert_type_3 str5    %9s                   sow_fert_type_3
sow_fert_dose_3 str4    %9s                   sow_fert_dose_3
sow_fert_date_4 str10   %10s                  sow_fert_date_4
sow_fert_type_4 str5    %9s                   sow_fert_type_4
sow_fert_dose_4 str4    %9s                   sow_fert_dose_4
transp_harden~t str10   %10s                  transp_harden_date_srt
transp_harden~d str10   %10s                  transp_harden_date_end
transp_date_1   str10   %10s                  transp_date_1
transp_med_1    str17   %17s                  transp_med_1
transp_no_int_1 byte    %10.0g                transp_no_int_1
transp_no_end_1 byte    %10.0g                transp_no_end_1
transp_date_2   str10   %10s                  transp_date_2
transp_med_2    str18   %18s                  transp_med_2
transp_no_int_2 byte    %10.0g                transp_no_int_2
transp_no_end_2 byte    %10.0g                transp_no_end_2
fert_code_1     str11   %11s                  fert_code_1
fert_date_1     str10   %10s                  fert_date_1
fert_amnt_per_1 double  %10.0g                fert_amnt_per_1
fert_unit_1     str3    %9s                   fert_unit_1
fert_code_2     byte    %10.0g                fert_code_2
fert_date_2     byte    %10.0g                fert_date_2
fert_amnt_per_2 byte    %10.0g                fert_amnt_per_2
fert_unit_2     byte    %10.0g                fert_unit_2
fert_code_3     byte    %10.0g                fert_code_3
fert_date_3     byte    %10.0g                fert_date_3
fert_amnt_per_3 byte    %10.0g                fert_amnt_per_3
fert_unit_3     byte    %10.0g                fert_unit_3
path_code_1     str13   %13s                  path_code_1
path_date_1     str10   %10s                  path_date_1
path_no_1       byte    %10.0g                path_no_1
path_ipm_ty~1_1 str6    %9s                   path_ipm_type_1_1
path_ipm_da~1_1 str3    %9s                   path_ipm_date_1_1
path_ipm_ty~1_2 byte    %10.0g                path_ipm_type_1_2
path_ipm_da~1_2 byte    %10.0g                path_ipm_date_1_2
path_ipm_ty~1_3 byte    %10.0g                path_ipm_type_1_3
path_ipm_da~1_3 byte    %10.0g                path_ipm_date_1_3
path_code_2     byte    %10.0g                path_code_2
path_date_2     byte    %10.0g                path_date_2
path_no_2       byte    %10.0g                path_no_2
path_ipm_ty~2_1 byte    %10.0g                path_ipm_type_2_1
path_ipm_da~2_1 byte    %10.0g                path_ipm_date_2_1
path_ipm_ty~2_2 byte    %10.0g                path_ipm_type_2_2
path_ipm_da~2_2 byte    %10.0g                path_ipm_date_2_2
path_ipm_ty~2_3 byte    %10.0g                path_ipm_type_2_3
path_ipm_da~2_3 byte    %10.0g                path_ipm_date_2_3
notes           str122  %122s                 notes
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Sorted by: 
     Note: Dataset has changed since last saved.

.         
.         /* Save raw TBF Market Garden 2023 data */
.         save "$root\tbf_market_garden_data_2023_raw.dta", replace
file C:\Users\sethb\Documents\The Brosey Farm\GitHub repositories\The-Brosey-Farm\analytics\BFRproj\tbf_market_garden_data_2023_raw.dta saved

.         
.    
. *=========================================================================================
. * II) MANAGE VARIABLES
. *=========================================================================================  
. 
.         /* Convert categorical strings into categorical numerics */
.         local cat_str_list crop

.         tab1 `cat_str_list', missing

-> tabulation of crop  

                           crop |      Freq.     Percent        Cum.
--------------------------------+-----------------------------------
         arrugula- garden tangy |          2        7.41        7.41
                   basil- sweet |          1        3.70       11.11
            bean- fin de bagnol |          2        7.41       18.52
                carrot- touchon |          2        7.41       25.93
                       cilantro |          1        3.70       29.63
                     dill- hera |          2        7.41       37.04
         eggplant- black beauty |          1        3.70       40.74
                 kale- lacinato |          1        3.70       44.44
         lettuce- gourmet blend |          1        3.70       48.15
                pepper- anaheim |          1        3.70       51.85
        pepper- jalapeno- early |          1        3.70       55.56
       pepper- sweet- ca wonder |          1        3.70       59.26
              pumpkin- ct field |          2        7.41       66.67
               sage- broad leaf |          1        3.70       70.37
             sunflower- mammoth |          2        7.41       77.78
  sweet corn- country gentleman |          2        7.41       85.19
sweet corn- ornamental- glas gm |          2        7.41       92.59
                  tomato- amish |          1        3.70       96.30
                   tomato- roma |          1        3.70      100.00
--------------------------------+-----------------------------------
                          Total |         27      100.00

.         foreach var of varlist `cat_str_list' {
  2.                 encode (`var'), generate(`var'_code)
  3.                 tablist `var'_code `var', sort(variable) 
  4.                 tablist `var'_code `var', sort(variable) nolabel ab(32)
  5.                 order `var'_code, after(`var')
  6.                 *pause
.         }

  +---------------------------------------------------------------------------------------------------------+
  |                       crop_code                              crop   _Freq_   _Perc_   _CFreq_   _CPerc_ |
  |---------------------------------------------------------------------------------------------------------|
  |             bean- fin de bagnol               bean- fin de bagnol        2     7.41         2      7.41 |
  |               pumpkin- ct field                 pumpkin- ct field        2     7.41         4     14.81 |
  |                 carrot- touchon                   carrot- touchon        2     7.41         6     22.22 |
  | sweet corn- ornamental- glas gm   sweet corn- ornamental- glas gm        2     7.41         8     29.63 |
  |                      dill- hera                        dill- hera        2     7.41        10     37.04 |
  |---------------------------------------------------------------------------------------------------------|
  |   sweet corn- country gentleman     sweet corn- country gentleman        2     7.41        12     44.44 |
  |          arrugula- garden tangy            arrugula- garden tangy        2     7.41        14     51.85 |
  |              sunflower- mammoth                sunflower- mammoth        2     7.41        16     59.26 |
  |                sage- broad leaf                  sage- broad leaf        1     3.70        17     62.96 |
  |                 pepper- anaheim                   pepper- anaheim        1     3.70        18     66.67 |
  |---------------------------------------------------------------------------------------------------------|
  |                    basil- sweet                      basil- sweet        1     3.70        19     70.37 |
  |        pepper- sweet- ca wonder          pepper- sweet- ca wonder        1     3.70        20     74.07 |
  |                   tomato- amish                     tomato- amish        1     3.70        21     77.78 |
  |                    tomato- roma                      tomato- roma        1     3.70        22     81.48 |
  |                        cilantro                          cilantro        1     3.70        23     85.19 |
  |---------------------------------------------------------------------------------------------------------|
  |         pepper- jalapeno- early           pepper- jalapeno- early        1     3.70        24     88.89 |
  |                  kale- lacinato                    kale- lacinato        1     3.70        25     92.59 |
  |          eggplant- black beauty            eggplant- black beauty        1     3.70        26     96.30 |
  |          lettuce- gourmet blend            lettuce- gourmet blend        1     3.70        27    100.00 |
  +---------------------------------------------------------------------------------------------------------+

  +-----------------------------------------------------------------------------------+
  | crop_code                              crop   _Freq_   _Perc_   _CFreq_   _CPerc_ |
  |-----------------------------------------------------------------------------------|
  |         3               bean- fin de bagnol        2     7.41         2      7.41 |
  |        17   sweet corn- ornamental- glas gm        2     7.41         4     14.81 |
  |        13                 pumpkin- ct field        2     7.41         6     22.22 |
  |         4                   carrot- touchon        2     7.41         8     29.63 |
  |         6                        dill- hera        2     7.41        10     37.04 |
  |-----------------------------------------------------------------------------------|
  |        16     sweet corn- country gentleman        2     7.41        12     44.44 |
  |        15                sunflower- mammoth        2     7.41        14     51.85 |
  |         1            arrugula- garden tangy        2     7.41        16     59.26 |
  |        19                      tomato- roma        1     3.70        17     62.96 |
  |         8                    kale- lacinato        1     3.70        18     66.67 |
  |-----------------------------------------------------------------------------------|
  |         2                      basil- sweet        1     3.70        19     70.37 |
  |        14                  sage- broad leaf        1     3.70        20     74.07 |
  |        10                   pepper- anaheim        1     3.70        21     77.78 |
  |        11           pepper- jalapeno- early        1     3.70        22     81.48 |
  |        18                     tomato- amish        1     3.70        23     85.19 |
  |-----------------------------------------------------------------------------------|
  |         9            lettuce- gourmet blend        1     3.70        24     88.89 |
  |         5                          cilantro        1     3.70        25     92.59 |
  |        12          pepper- sweet- ca wonder        1     3.70        26     96.30 |
  |         7            eggplant- black beauty        1     3.70        27    100.00 |
  +-----------------------------------------------------------------------------------+

.     
.     
. *=========================================================================================
. * III) CLEAN DATA
. *=========================================================================================     
. 
.         /* Clean missing values */
.         
.         
. 
.         /* Save clean TBF Market Garden 2023 data */
.         save "$root\tbf_market_garden_data_2023_clean.dta", replace
file C:\Users\sethb\Documents\The Brosey Farm\GitHub repositories\The-Brosey-Farm\analytics\BFRproj\tbf_market_garden_data_2023_clean.dta saved

.         
.  
. *=========================================================================================
. * IV) DESCRIPTIVE STATISTICS
. *=========================================================================================     
. 
. 
. log close _all
      name:  full
       log:  C:\Users\sethb\Documents\The Brosey Farm\GitHub repositories\The-Brosey-Farm\analytics\BFRproj\05_tbf_data_2023_cleaning.log
  log type:  text
 closed on:  12 Jul 2023, 23:07:40
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
